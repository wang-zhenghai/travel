(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["activityPages/editor/editor"],{"0723":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("1827");o(n("66fd"));var r=o(n("468c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"0a8d":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("2eee")),a=o(n("c973")),i={data:function(){return{readOnly:!1,progress:!1,percent:20,formats:{},content:"",placeholder:"亲，在这里输入内容...",title:""}},methods:{submitStrategy:function(){var e=this;return(0,a.default)(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.getStorageSync("token")){n.next=4;break}return t.navigateTo({url:"/pages/login/login"}),t.$showMsg("亲，先登录才能发表哦~"),n.abrupt("return");case 4:if(""!=e.title){n.next=7;break}return t.$showMsg("亲，输入攻略标题更方便别人能看到你哦~"),n.abrupt("return");case 7:if(""!=e.content&&"<p><br></p>"!=e.content){n.next=10;break}return t.$showMsg("亲，请输入内容哦~"),n.abrupt("return");case 10:return n.next=12,t.$http.post("/blog/save",{title:e.title,images:"",location:"",content:e.content,tag:"",type:"攻略"});case 12:o=n.sent,a=o.data,1===a.code?(e.progress=!0,clearInterval(e.timer),e.timer=setInterval((function(){e.percent+=20,100===e.percent&&(e.progress=!1)}),450),setTimeout((function(){t.redirectTo({url:"/activityPages/strategyPages/strategyPages"})}),3e3)):t.$showMsg(a.msg);case 15:case"end":return n.stop()}}),n)})))()},cancle:function(){t.navigateBack()},editText:function(t){this.content=t.detail.html},readOnlyChange:function(){this.readOnly=!this.readOnly},onEditorReady:function(){var e=this;t.createSelectorQuery().select("#editor").context((function(t){e.editorCtx=t.context,e.editorCtx.setContents({html:e.value})})).exec()},undo:function(){this.editorCtx.undo()},redo:function(){this.editorCtx.redo()},format:function(t){var e=t.target.dataset,n=e.name,o=e.value;n&&this.editorCtx.format(n,o)},onStatusChange:function(t){var e=t.detail;this.formats=e},insertDivider:function(){this.editorCtx.insertDivider({success:function(){console.log("insert divider success")}})},clear:function(){this.editorCtx.clear({success:function(t){console.log("clear success")}})},removeFormat:function(){this.editorCtx.removeFormat()},insertDate:function(){var t=new Date,e="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());this.editorCtx.insertText({text:e})},insertImage:function(){var e=this;t.chooseImage({count:1,success:function(n){t.uploadFile({url:"https://www.wangzh.work/upload",filePath:n.tempFilePaths[0],name:"file",success:function(t){e.editorCtx.insertImage({src:JSON.parse(t.data).data,alt:"图像",success:function(){}})},fail:function(e){console.log("uploadImage fail",e),t.showModal({content:e.errMsg,showCancel:!1})}})}})}},onLoad:function(){t.loadFontFace({family:"Pacifico",source:'url("./Pacifico.ttf")'})}};e.default=i}).call(this,n("543d")["default"])},"468c":function(t,e,n){"use strict";n.r(e);var o=n("f81e"),r=n("4dc5");for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("49bc");var i=n("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"67585eb6",null,!1,o["a"],void 0);e["default"]=c.exports},"49bc":function(t,e,n){"use strict";var o=n("da10"),r=n.n(o);r.a},"4dc5":function(t,e,n){"use strict";n.r(e);var o=n("0a8d"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=r.a},da10:function(t,e,n){},f81e:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={tnNavBar:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-nav-bar/tn-nav-bar")]).then(n.bind(null,"aa86"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"6545"))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,"9231"))},uOverlay:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-overlay/u-overlay")]).then(n.bind(null,"a0b9"))},tnCircleProgress:function(){return n.e("tuniao-ui/components/tn-circle-progress/tn-circle-progress").then(n.bind(null,"1b71"))}},r=function(){var t=this.$createElement;this._self._c},a=[]}},[["0723","common/runtime","common/vendor"]]]);