(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["circlePages/edit","components/user-login/user-login"],{"0ef7":function(t,e,n){},"0fe9":function(t,e,n){"use strict";n.r(e);var o=n("5371"),a=n("aaec");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("a530");var u=n("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"ba2f33da",null,!1,o["a"],void 0);e["default"]=r.exports},"3c0a":function(t,e,n){"use strict";n.r(e);var o=n("929e"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"4ed0":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"Login",methods:{goLogin:function(){t.navigateTo({url:"/pages/login/login"})},rightClick:function(){t.navigateBack()}}};e.default=n}).call(this,n("543d")["default"])},5371:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"cc7a"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"6545"))}},a=function(){var t=this.$createElement;this._self._c},i=[]},9225:function(t,e,n){},"929e":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),i=o(n("c973")),u=o(n("88ff")),r=(o(n("0fe9")),{name:"TemplateEdit",mixins:[u.default],data:function(){return{title:"",percent:20,content:"",show:!1,progress:!1,showTag:!0,tag:"",tagList:[],action:"https://www.wangzh.work/upload",fileList:[],showUploadList:!0,customBtn:!1,showType:!1,autoUpload:!0,showProgress:!0,maxCount:15,location:"请选择拍摄地点",type:"请选择类型",typeList:[{text:"游记",color:"#009ad6"},{text:"攻略",color:"#2a5caa"}],disabled:!1,uploadFilePath:[],seletedTagList:[]}},onLoad:function(){},watch:{seletedTagList:function(e,n){e.length>5&&(t.$showMsg("亲，最多可以添加5个标签哦~"),this.seletedTagList.splice(5))}},methods:{submitType:function(t){this.type=0===t?"游记":"攻略"},getLocation:function(){var e=this;t.chooseLocation({success:function(t){""!=t.name&&(e.location=t.name)}})},getTagList:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var o,i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""===e.content){n.next=6;break}return n.next=3,t.$http.get("/api/getTagList?text="+e.content);case 3:o=n.sent,i=o.data,1===i.code&&(e.tagList=i.data);case 6:case"end":return n.stop()}}),n)})))()},confirmTag:function(){if(""!==this.tag){var e=this.seletedTagList.indexOf(this.tag);-1!=e?(t.$showMsg("已存在相同标签啦！"),this.tag=""):(this.seletedTagList.push(this.tag),this.show=!1,this.tag="",t.$showMsg("添加成功！"))}else t.$showMsg("自定义标签不能为空")},selectTag:function(e){var n=this.seletedTagList.indexOf(e);-1!=n?t.$showMsg("相同标签只能存在一个哦"):this.seletedTagList.push(e)},close:function(t){var e=this.seletedTagList.indexOf(t);this.seletedTagList.splice(e,1)},delTagList:function(){this.seletedTagList=[]},uploadSuccess:function(t){this.uploadFilePath.push(t.data)},submit:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var o,i,u,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.getStorageSync("token")){n.next=4;break}return t.navigateTo({url:"/pages/login/login"}),t.$showMsg("亲，先登录才能发表哦~"),n.abrupt("return");case 4:if(""!==e.title){n.next=7;break}return t.$showMsg("亲,标题不能为空哦~"),n.abrupt("return");case 7:if(""!==e.content){n.next=10;break}return t.$showMsg("亲,内容不能为空哦~"),n.abrupt("return");case 10:if(0!==e.uploadFilePath.length){n.next=13;break}return t.$showMsg("亲,照片至少上传一张哦~"),n.abrupt("return");case 13:if("请选择拍摄地点"!==e.location){n.next=16;break}return t.$showMsg("亲,请选择拍摄地点哦~"),n.abrupt("return");case 16:if(""!==e.title||""!=e.content||0!==e.uploadFilePath.length){n.next=19;break}return t.$showMsg("亲,标题和内容与照片都不能为空哦~"),n.abrupt("return");case 19:return o=e.uploadFilePath.join(","),i=e.seletedTagList.join(","),n.next=23,t.$http.post("/blog/save",{title:e.title,images:o,location:e.location,content:e.content,tag:i,type:"游记"});case 23:u=n.sent,r=u.data,1===r.code?(e.progress=!0,clearInterval(e.timer),e.timer=setInterval((function(){e.percent+=20,100===e.percent&&(e.progress=!1)}),450),setTimeout((function(){t.redirectTo({url:"/activityPages/travelPages/travelPages"})}),3e3),e.$refs.imageUpload.clear(),e.title="",e.content="",e.location="",e.type="",e.seletedTagList=[]):t.$showMsg(r.msg);case 26:case"end":return n.stop()}}),n)})))()},tn:function(e){t.navigateTo({url:e})},upload:function(){this.$refs.imageUpload.upload()},clear:function(){this.$refs.imageUpload.clear(),this.uploadFilePath=[]}}});e.default=r}).call(this,n("543d")["default"])},a530:function(t,e,n){"use strict";var o=n("0ef7"),a=n.n(o);a.a},aaec:function(t,e,n){"use strict";n.r(e);var o=n("4ed0"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},aceb:function(t,e,n){"use strict";n.r(e);var o=n("dab0"),a=n("3c0a");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("cc63");var u=n("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"295e9f8c",null,!1,o["a"],void 0);e["default"]=r.exports},cc63:function(t,e,n){"use strict";var o=n("9225"),a=n.n(o);a.a},dab0:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={tnNavBar:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-nav-bar/tn-nav-bar")]).then(n.bind(null,"aa86"))},tnImageUploadDrag:function(){return n.e("tuniao-ui/components/tn-image-upload-drag/tn-image-upload-drag").then(n.bind(null,"00a8"))},uTag:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-tag/u-tag")]).then(n.bind(null,"287f"))},tnPopup:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-popup/tn-popup")]).then(n.bind(null,"3a3d"))},tnInput:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-input/tn-input")]).then(n.bind(null,"c3f9"))},tnButton:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-button/tn-button")]).then(n.bind(null,"e6e0"))},uOverlay:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-overlay/u-overlay")]).then(n.bind(null,"a0b9"))},tnCircleProgress:function(){return n.e("tuniao-ui/components/tn-circle-progress/tn-circle-progress").then(n.bind(null,"1b71"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.seletedTagList.length),o=t.tagList.length;t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.show=!1},t.e2=function(e){t.show=!0}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:o}})},i=[]},e9f7:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("1827");o(n("66fd"));var a=o(n("aceb"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["e9f7","common/runtime","common/vendor"]]]);