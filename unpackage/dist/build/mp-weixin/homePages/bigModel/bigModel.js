(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["homePages/bigModel/bigModel"],{"60bf":function(t,e,n){},"9fec":function(t,e,n){"use strict";n.r(e);var o=n("ea88"),a=n("d811");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("f4c6");var r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports},d811:function(t,e,n){"use strict";n.r(e);var o=n("e121"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},e121:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),i=o(n("c973")),r={data:function(){return{loadding:!1,show:!1,bottom:0,keyboardHeight:0,replyContainerH:t.upx2px(500),platFormUserId:"1",roleDesc:"",content:"",avatar:"",isShow:!1,textareaClass:"",placeholderClass:"",placeholder:"请输入内容",sendText:"发送",reply:"",chatList:[{type:1,userId:"gpt",text:"我是你的智能小助手，你可以试试问我问题！",src:""}]}},onLoad:function(e){var n=this,o=this.isPhoneX()?34:0;t.getSystemInfo({success:function(t){n.bottom=t.screenHeight-t.windowHeight-t.statusBarHeight,n.keyboardHeight=n.bottom/2}}),t.onKeyboardHeightChange((function(t){var e=t.height-o;n.keyboardHeight=e>0?e:n.bottom/2,setTimeout((function(){1==n.showIndex&&0!=n.keyboardHeight&&(n.replyContainerH=n.keyboardHeight)}),100)})),this.queryUserById()},methods:{queryUserById:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var o,i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/user/queryUserById?userId="+t.getStorageSync("userId"));case 2:o=n.sent,i=o.data,e.avatar=i.data.avatar;case 5:case"end":return n.stop()}}),n)})))()},isPhoneX:function(){var e=t.getSystemInfoSync(),n=!1,o=e.model.replace(/\s/g,"").toLowerCase();return["iphonex","iphonexr","iphonexsmax","iphone11","iphone11pro","iphone11promax"].includes(o)&&(n=!0),n},sendMsg:function(){var e=this;if(this.content){var n=this.content;this.content="",this.chatList.push({toId:"gpt",type:1,userId:"",text:n,src:""}),setTimeout((function(){e.toBottom()}),0),t.showLoading({title:"小助手正在思考中..."}),t.request({url:"https://www.wangzh.work/bigModel/"+n,method:"GET",success:function(n){t.hideLoading(),null!=n.data?(e.chatList.push({type:1,userId:"gpt",text:n.data,src:""}),e.showReply(n.data)):t.showToast({title:"网络错误！",icon:"none"})},fail:function(e){t.hideLoading(),console.log(e)}})}else t.showToast({title:"请输入内容",icon:"none"})},inputReply:function(t){this.content=t.detail.value},showKeyBoard:function(t){},showReply:function(t){var e=this,n=t,o=n.split(""),a="",i=0,r=setInterval((function(){i<o.length?("\n"==o[i]?a+="\n":a+=o[i],e.reply=a,i++,e.toBottom()):clearInterval(r)}),100);setTimeout((function(){e.isShow=!0}),100*o.length)},toBottom:function(){this.$nextTick((function(){setTimeout((function(){t.createSelectorQuery().select(".cg-chat-content").boundingClientRect((function(e){t.pageScrollTo({scrollTop:e.height,duration:0})})).exec()}),0)}))},cancle:function(){t.navigateBack()}},onPageScroll:function(t){var e=this;0!=t.scrollTop||this.loadding||(this.loadding=!0,setTimeout((function(){e.show=!0,e.loadding=!1}),1e3))}};e.default=r}).call(this,n("543d")["default"])},e66d:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("1827");o(n("66fd"));var a=o(n("9fec"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ea88:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={tnNavBar:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-nav-bar/tn-nav-bar")]).then(n.bind(null,"aa86"))},tnButton:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-button/tn-button")]).then(n.bind(null,"e6e0"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.chatList,(function(e,n){var o=t.__get_orig(e),a="gpt"==e.userId?n==t.chatList.length-1&&0!=n:null;return{$orig:o,g0:a}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},f4c6:function(t,e,n){"use strict";var o=n("60bf"),a=n.n(o);a.a}},[["e66d","common/runtime","common/vendor"]]]);