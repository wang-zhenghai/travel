{"version":3,"sources":["uni-app:///main.js","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?60a5","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?393b","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?1d8f","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?155c","uni-app:///pages/video/video.vue","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?5176","webpack:///E:/uniapp项目/travel-demo/pages/video/video.vue?b8f7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","videoId","color","color1","userComment","height","showReport","reportList","id","backgroundColor","title","target","placeholder","parentId","commentList","videoInfo","commentTotal","userId","videoUserId","showCommentList","showSubmitPopup","showReplyPopup","ip","longitude","latitude","watch","onShow","methods","closeshowReport","selectReports","goUserHome","uni","url","report","submitReport","icon","setTimeout","sendComment","saveCommentDTO","content","foreignId","sendReplyComment","openSubmitPopup","closeSubmitPopup","closeReplyPopup","submitComment","reply","loadComment","handlePublishTimeDesc","likeComment","closeComment","openComment","likeVideo","duration","collectionVideo","goBack","getVideoInfo","created","type","altitude","success","_this","onLoad"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wRAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpIA;AAAA;AAAA;AAAA;AAAgoB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACiOppB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAGA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,aACA;QAAAC;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,GACA;QAAAF;QACAC;QACAC;MAAA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACArB;MACA;QACA;MACA;MACA;QACA;MACA;IACA;EACA;EACAsB;IACA;EACA;EACAC;IACAC;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAC;QACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAH;UACAC;QACA;QACAD;QACA;MACA;MACA;QAAA;MAAA;QACAA;QACA;MACA;MACAA;QACArB;QACAyB;MACA;MACAC;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACAC;kBACAC;kBACAjB;kBACAC;gBACA;gBAAA;gBAAA,OAGAO;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;kBACA;kBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA+B;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAU;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAH;kBACAC;kBACAC;kBACA7B;kBACAE;kBACAU;kBACAC;gBACA;gBAAA;gBAAA,OAGAO;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;kBACA;kBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA+B;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAW,6CAEA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;kBACA;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGAhB;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;gBACA;kBACA+B;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAiB;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACA;MACA;QACA;UACA;QACA;UACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGAlB;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;oBACA;kBACA;oBACA;kBACA;gBACA;kBACA+B;oBACAC;kBACA;kBACAD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAmB;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGArB;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;oBACA;oBACA+B;sBACArB;sBACAyB;sBACAkB;oBACA;kBACA;oBACA;oBACAtB;sBACArB;sBACAyB;sBACAkB;oBACA;kBACA;gBACA;kBACAtB;oBACAC;kBACA;kBACAD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAuB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGAvB;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;oBACA;oBACA+B;sBACArB;sBACAyB;sBACAkB;oBACA;kBACA;oBACA;oBACAtB;sBACArB;sBACAyB;sBACAkB;oBACA;kBACA;gBACA;kBACAtB;oBACAC;kBACA;kBACAD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAwB;MACAxB;IACA;IACAyB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGAzB;cAAA;gBAAA;gBADA/B;gBAEA;kBACA;kBACA;gBACA;kBACA+B;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;EACA0B;IACA;IACA1B;MACA2B;MACAC;MACAC;QACAC;QACAA;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9jBA;AAAA;AAAA;AAAA;AAA2tC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACA/uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/video/video.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/video/video.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./video.vue?vue&type=template&id=3ec61a7e&scoped=true&\"\nvar renderjs\nimport script from \"./video.vue?vue&type=script&lang=js&\"\nexport * from \"./video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./video.vue?vue&type=style&index=0&id=3ec61a7e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ec61a7e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/video/video.vue\"\nexport default component.exports","export * from \"-!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=template&id=3ec61a7e&scoped=true&\"","var components\ntry {\n  components = {\n    tnNavBar: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-nav-bar/tn-nav-bar\" */ \"@/tuniao-ui/components/tn-nav-bar/tn-nav-bar.vue\"\n      )\n    },\n    tnAvatar: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-avatar/tn-avatar\" */ \"@/tuniao-ui/components/tn-avatar/tn-avatar.vue\"\n      )\n    },\n    tnPopup: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-popup/tn-popup\" */ \"@/tuniao-ui/components/tn-popup/tn-popup.vue\"\n      )\n    },\n    tnEmpty: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-empty/tn-empty\" */ \"@/tuniao-ui/components/tn-empty/tn-empty.vue\"\n      )\n    },\n    tnTag: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-tag/tn-tag\" */ \"@/tuniao-ui/components/tn-tag/tn-tag.vue\"\n      )\n    },\n    \"u-Input\": function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u--input/u--input\" */ \"uview-ui/components/u--input/u--input.vue\"\n      )\n    },\n    \"u-Textarea\": function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u--textarea/u--textarea\" */ \"uview-ui/components/u--textarea/u--textarea.vue\"\n      )\n    },\n    tnButton: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-button/tn-button\" */ \"@/tuniao-ui/components/tn-button/tn-button.vue\"\n      )\n    },\n    uLine: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-line/u-line\" */ \"uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.videoInfo.liked > 9999 && _vm.videoInfo.liked < 99999\n      ? Math.floor(_vm.videoInfo.liked / 1000)\n      : null\n  var g1 =\n    _vm.videoInfo.liked > 99999 ? Math.floor(_vm.videoInfo.liked / 1000) : null\n  var g2 =\n    _vm.videoInfo.comment > 9999 && _vm.videoInfo.comment < 99999\n      ? Math.floor(_vm.videoInfo.comment / 1000)\n      : null\n  var g3 =\n    _vm.videoInfo.comment > 99999\n      ? Math.floor(_vm.videoInfo.comment / 1000)\n      : null\n  var g4 =\n    _vm.videoInfo.collection > 9999 && _vm.videoInfo.collection < 99999\n      ? Math.floor(_vm.videoInfo.collection / 1000)\n      : null\n  var g5 =\n    _vm.videoInfo.collection > 99999\n      ? Math.floor(_vm.videoInfo.collection / 1000)\n      : null\n  var g6 = _vm.commentList.length\n  var l1 = _vm.__map(_vm.commentList, function (item, __i0__) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.handlePublishTimeDesc(item.createTime)\n    var l0 = _vm.__map(item.children, function (children, __i1__) {\n      var $orig = _vm.__get_orig(children)\n      var m1 = _vm.handlePublishTimeDesc(children.createTime)\n      return {\n        $orig: $orig,\n        m1: m1,\n      }\n    })\n    return {\n      $orig: $orig,\n      m0: m0,\n      l0: l0,\n    }\n  })\n  var g7 = _vm.userComment ? _vm.userComment.length : null\n  var g8 = _vm.userComment ? _vm.userComment.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        l1: l1,\n        g7: g7,\n        g8: g8,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<tn-nav-bar :isBack=\"true\" :bottomShadow=\"true\" backgroundColor=\"#fff\" backTitle=\" \">\r\n\t\t\t<view class=\"custom-nav tn-flex tn-flex-col-center tn-flex-row-left\">\r\n\t\t\t\t<view class=\"tn-margin-top tn-margin-left\"\r\n\t\t\t\t\tstyle=\"text-shadow:  1rpx 0 0 #FFF, 0 1rpx 0 #FFF, -1rpx 0 0 #FFF , 0 -1rpx 0 #FFF;\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</tn-nav-bar>\r\n\t\t<view>\r\n\t\t\t<video :src=\"videoInfo.url\" :show-center-play-btn=\"true\" :autoplay=\"true\" loop\r\n\t\t\t\tstyle=\"height:89vh;width: 100vw;\" :show-fullscreen-btn=\"false\" :enable-play-gesture=\"true\"></video>\r\n\t\t\t<view style=\"position: absolute;top: 752rpx;left:640rpx\" @click=\"goBack\">\r\n\t\t\t\t<tn-avatar :src=\"videoInfo.avatar\" backgroundColor=\"tn-color-white\" size=\"lg\" border\r\n\t\t\t\t\tborderColor=\"#2b7dcb\"></tn-avatar>\r\n\t\t\t</view>\r\n\t\t\t<view @click=\"likeVideo(videoInfo.id,videoInfo.isLike)\"\r\n\t\t\t\tstyle=\"position: absolute;top: 870rpx;left:650rpx;display: flex;flex-direction: column;align-videoInfos: center;\">\r\n\t\t\t\t<text class=\"tn-icon-like-fill\" style=\"font-size: 36px;\"\r\n\t\t\t\t\t:style=\"{color:videoInfo.isLike?color:color1}\"></text>\r\n\t\t\t\t<text style=\"font-size: 11px;color: #FFF;margin-top: 6rpx;\" v-if=\"videoInfo.liked<1\">赞</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.liked>0&&videoInfo.liked<9999\">{{videoInfo.liked}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 12rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.liked>9999&&videoInfo.liked<99999\">{{(Math.floor(videoInfo.liked/1000)/10) + '万'}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 3rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.liked>99999\">{{(Math.floor(videoInfo.liked/1000)/10) + '万'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view @click=\"openComment(videoInfo.id,videoInfo.comment,videoInfo.userId)\"\r\n\t\t\t\tstyle=\"position: absolute;top: 1000rpx;left:650rpx;display: flex;flex-direction: column;align-videoInfos: center;\">\r\n\t\t\t\t<text class=\"tn-icon-comment\" style=\"font-size: 35px;color: #fff;\"></text>\r\n\t\t\t\t<text style=\"font-size: 10px;color: #FFF;margin-top: 6rpx;margin-left: 10rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.comment<1\">抢首评</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 24rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.comment>0&&videoInfo.comment<9999\">{{videoInfo.comment}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 12rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.comment>9999&&videoInfo.comment<99999\">{{(Math.floor(videoInfo.comment/1000)/10) + '万'}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 3rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.comment>99999\">{{(Math.floor(videoInfo.comment/1000)/10) + '万'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view @click=\"collectionVideo(videoInfo.id,videoInfo.isCollection)\"\r\n\t\t\t\tstyle=\"position: absolute;top: 1125rpx;left:652rpx;display: flex;flex-direction: column;align-videoInfos: center;\">\r\n\t\t\t\t<text class=\"tn-icon-star-fill\" style=\"font-size: 33px;\"\r\n\t\t\t\t\t:style=\"{color:videoInfo.isCollection?'#fdba13':'#ffffff'}\"></text>\r\n\t\t\t\t<text style=\"font-size: 11px;color: #FFF;margin-top: 6rpx;\" v-if=\"videoInfo.collection<1\">收藏</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.collection>0&&videoInfo.collection<9999\">{{videoInfo.collection}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 12rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.collection>9999&&videoInfo.collection<99999\">{{(Math.floor(videoInfo.collection/1000)/10) + '万'}}</text>\r\n\t\t\t\t<text style=\"font-size: 12px;color: #FFF;margin-top: 6rpx;margin-left: 3rpx;\"\r\n\t\t\t\t\tv-if=\"videoInfo.collection>99999\">{{(Math.floor(videoInfo.collection/1000)/10) + '万'}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"position: absolute;top: 1260rpx;left: 10rpx;\">\r\n\t\t\t\t<text style=\"color: #fff;margin-left: 10rpx;\">@{{videoInfo.username}}</text>\r\n\t\t\t\t<view style=\"margin-top: 10rpx;\">\r\n\t\t\t\t\t<text style=\"color: #fff;margin-left: 10rpx;\" class=\"u-line-2\">\r\n\t\t\t\t\t\t{{videoInfo.title}}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<text style=\"color: #fff;margin-left: 10rpx;\" class=\"u-line-1\">\r\n\t\t\t\t\t\t\t{{videoInfo.tag?'#'+videoInfo.tag:''}}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<tn-popup v-model=\"showCommentList\" mode=\"bottom\" width=\"750rpx\" :safeAreaInsetBottom=\"true\" height=\"950rpx\"\r\n\t\t\t\t:closeBtn=\"true\" @open=\"loadComment\" @close=\"closeComment\">\r\n\t\t\t\t<view style=\"margin-left: 310rpx;margin-top: 20rpx;\"><text>{{commentTotal}}条评论</text></view>\r\n\t\t\t\t<!-- 评论 -->\r\n\t\t\t\t<scroll-view :scroll-y=\"true\" style=\"height: 1100rpx;\">\r\n\t\t\t\t\t<view v-if=\"commentList.length===0\" style=\"margin-top: 200rpx;\">\r\n\t\t\t\t\t\t<tn-empty mode=\"comment\"></tn-empty>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-margin\" v-for=\"item of commentList\" :key=\"item.id\"\r\n\t\t\t\t\t\tstyle=\"margin-top: 30rpx;margin-bottom: 10rpx;\">\r\n\t\t\t\t\t\t<!-- 图标logo/头像 -->\r\n\t\t\t\t\t\t<view class=\"tn-flex tn-flex-row-between tn-flex-col-center tn-margin-top-xl\">\r\n\t\t\t\t\t\t\t<view class=\"justify-content-item\">\r\n\t\t\t\t\t\t\t\t<view class=\"tn-flex tn-flex-col-center tn-flex-row-left\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"logo-pic tn-shadow\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"logo-image\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"tn-shadow-blur\" @click=\"goUserHome(item.userId)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{backgroundImage: 'url(' + item.avatar + ')',backgroundSize:'cover',width:'70rpx',height:'70rpx'}\">\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"tn-padding-right tn-padding-left-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"tn-padding-right tn-text-df tn-text-bold tn-color-black\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"display: flex;\" @click=\"goUserHome(item.userId)\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.username}}\r\n\t\t\t\t\t\t\t\t\t\t\t<view style=\"margin-left: 6rpx;\" v-if=\"item.userId===videoUserId\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tn-tag backgroundColor=\"#ff007f\" fontColor=\"#FFF\" size=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"100%\" shape=\"circleLeft\">作者</tn-tag>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"justify-content-item tn-flex-row-center tn-flex-col-center tn-color-gray\">\r\n\t\t\t\t\t\t\t\t<view class=\"tn-text-center\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"tn-icon-like-fill tn-padding-xs\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"{color:item.isLike?'#fe3157':''}\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"likeComment(item.id,item.isLike)\"></text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"tn-text-center\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"tn-text-xs\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"likeComment(item.id,item.isLike)\">{{item.liked}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\" style=\"margin: 20rpx 20rpx 20rpx 80rpx;\">\r\n\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t\t<view class=\"justify-content-item tn-text-xs tn-color-gray\" style=\"margin-top: 12rpx;\">\r\n\t\t\t\t\t\t\t\t{{handlePublishTimeDesc(item.createTime)}}\r\n\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 22rpx;font-weight: 700;\">· {{item.province}}</text>\r\n\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 22rpx;font-weight: 500;color: black;\"\r\n\t\t\t\t\t\t\t\t\t@click=\"reply(item.username,item.id)\">回复</text>\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 10rpx;font-weight: 500;color: black;\" @click=\"report\" v-if=\"item.userId!=userId\">举报</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tn-bg-gray--light tn-padding-sm\" v-for=\"children of item.children\"\r\n\t\t\t\t\t\t\t:key=\"children.id\"\r\n\t\t\t\t\t\t\tstyle=\"margin: 20rpx 30rpx 30rpx 80rpx;border-radius: 10rpx;margin-bottom: 10rpx;\">\r\n\t\t\t\t\t\t\t<tn-avatar :src=\"children.avatar\" backgroundColor=\"tn-color-white\" size=\"sm\"\r\n\t\t\t\t\t\t\t\t@click=\"goUserHome(children.userId)\" border borderColor=\"#2b7dcb\"\r\n\t\t\t\t\t\t\t\tshape=\"square\"></tn-avatar>\r\n\t\t\t\t\t\t\t<text style=\"color: deepskyblue;font-size: 14px;margin-left: 8rpx;margin-right: 8rpx;\"\r\n\t\t\t\t\t\t\t\t@click=\"goUserHome(children.userId)\">{{children.username}}</text>\r\n\t\t\t\t\t\t\t<tn-tag backgroundColor=\"#ff007f\" fontColor=\"#FFF\" size=\"sm\" width=\"80rpx\"\r\n\t\t\t\t\t\t\t\tshape=\"circleLeft\" v-if=\"children.userId===videoUserId\">作者</tn-tag>\r\n\t\t\t\t\t\t\t<text class=\"tn-text-bold tn-padding-right-xs\" style=\"margin-left: 8rpx;line-height: 40rpx;\">回复{{children.target}}: {{children.content}}</text>\r\n\t\t\t\t\t\t\t<view class=\"tn-flex tn-flex-row-between tn-margin-top-xs\">\r\n\t\t\t\t\t\t\t\t<view class=\"justify-content-item tn-text-xs tn-color-gray\" style=\"padding-top: 5rpx;\">\r\n\t\t\t\t\t\t\t\t\t{{handlePublishTimeDesc(children.createTime)}}\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 22rpx;font-weight: 700;\">· {{children.province}}</text>\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 22rpx;font-weight: 500;color: black;\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"reply(children.username,item.id)\">回复</text>\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 12px;margin-left: 10rpx;font-weight: 500;color: black;\" @click=\"report\" v-if=\"children.userId!=userId\">举报</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"justify-content-item tn-text-xs tn-color-gray\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"tn-padding-xs\" style=\"font-size: 12px;\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"likeComment(children.id,children.isLike)\">{{children.liked}}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"tn-icon-like-fill\" style=\"font-size: 14px;\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"{color:children.isLike?'#fe3157':''}\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"likeComment(children.id,children.isLike)\"></text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-tabbar-height\"></view>\r\n\t\t\t\t\t<view style=\"position: fixed;bottom: 30rpx;border-top: 1px solid #bcbcbc;width: 100vw;\">\r\n\t\t\t\t\t\t<view style=\"padding: 6rpx 20rpx 20rpx 10rpx;\" @click=\"submitComment\">\r\n\t\t\t\t\t\t\t<u--input placeholder=\"善语结善缘,恶言伤人心\" border=\"surround\" shape=\"circle\" disabled\r\n\t\t\t\t\t\t\t\tdisabledColor=\"#f8f7f8\"></u--input>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-tabbar-height\"></view>\r\n\t\t\t\t\t<view class=\"tn-tabbar-height\"></view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</tn-popup>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<tn-popup v-model=\"showSubmitPopup\" @close=\"closeSubmitPopup\" @open=\"openSubmitPopup\" mode=\"bottom\"\r\n\t\t\t\twidth=\"750rpx\" :height=\"height+'rpx'\">\r\n\t\t\t\t<view style=\"display: flex;;\">\r\n\t\t\t\t\t<view style=\"padding: 10rpx 20rpx 20rpx 10rpx;\" :style=\"{flex:userComment===''?'1':'0.85'}\">\r\n\t\t\t\t\t\t<u--textarea height=\"200\" :cursorSpacing=\"100\" v-model=\"userComment\" ref=\"textarea\"\r\n\t\t\t\t\t\t\tplaceholder=\"善语结善缘,恶言伤人心\" :autoHeight=\"true\" maxlength=\"520\" :showConfirmBar=\"false\"\r\n\t\t\t\t\t\t\t:adjustPosition=\"false\">\r\n\t\t\t\t\t\t</u--textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"position: fixed;right: 10rpx;\" v-if=\"userComment\"\r\n\t\t\t\t\t\t:style=\"{top:userComment.length>85?'80rpx':'40rpx'}\">\r\n\t\t\t\t\t\t<tn-button backgroundColor=\"#fe3157\" fontColor=\"#ffffff\" size=\"sm\" shape=\"round\"\r\n\t\t\t\t\t\t\t@click=\"sendComment\">发送</tn-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</tn-popup>\r\n\t\t</view>\r\n\t\t<view style=\"border-radius: 30%;\">\r\n\t\t\t<tn-popup v-model=\"showReport\"  mode=\"bottom\" \r\n\t\t\theight=\"550rpx\" width=\"750rpx\" closeBtn borderRadius=\"30\" @close=\"closeshowReport\">\r\n\t\t\t\t<view style=\"margin-top: 22rpx;font-weight: 700;margin-left: 20rpx;margin-bottom: 28rpx;\">评论举报</view>\r\n\t\t\t\t<u-line></u-line>\r\n\t\t\t\t<view style=\"margin-top: 18rpx;margin-left: 20rpx;\">\r\n\t\t\t\t\t<text style=\"margin-right: 8rpx;font-size: 600;\">举报原因</text>\r\n\t\t\t\t\t<text style=\"color: red;margin-top: 30rpx;font-size: 22rpx;\">*</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin-top: 10rpx;display: flex;flex-wrap: wrap;\">\r\n\t\t\t\t\t<view  v-for=\"item of reportList\" :key=\"item.id\" style=\"padding: 20rpx;\">\r\n\t\t\t\t\t\t<tn-tag :backgroundColor=\"item.backgroundColor\" fontColor=\"#080808\" width=\"200rpx\" @click=\"selectReports(item.id-1)\">{{item.title}}</tn-tag>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footerfixed dd-glass tn-padding-left-sm tn-padding-right tn-padding-top-xs tn-padding-bottom-sm\">\r\n\t\t\t\t\t<tn-button backgroundColor=\"tn-bg-red\" fontColor=\"tn-color-white\" width=\"100%\"\r\n\t\t\t\t\t\t@click=\"submitReport\">提交</tn-button>\r\n\t\t\t\t</view>\r\n\t\t\t</tn-popup>\r\n\t\t</view>\r\n\t\t<!-- 回复弹窗 -->\r\n\t\t<view>\r\n\t\t\t<tn-popup v-model=\"showReplyPopup\" @close=\"closeReplyPopup\" @open=\"openSubmitPopup\" mode=\"bottom\"\r\n\t\t\t\twidth=\"750rpx\" :height=\"height+'rpx'\">\r\n\t\t\t\t<view style=\"display: flex;;\">\r\n\t\t\t\t\t<view style=\"padding: 10rpx 20rpx 20rpx 10rpx;\" :style=\"{flex:userComment===''?'1':'0.85'}\">\r\n\t\t\t\t\t\t<u--textarea height=\"200\" :cursorSpacing=\"100\" v-model=\"userComment\" ref=\"textarea\"\r\n\t\t\t\t\t\t\t:placeholder=\"placeholder\" :autoHeight=\"true\" maxlength=\"520\" :showConfirmBar=\"false\"\r\n\t\t\t\t\t\t\t:adjustPosition=\"false\">\r\n\t\t\t\t\t\t</u--textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"position: fixed;right: 10rpx;\" v-if=\"userComment\"\r\n\t\t\t\t\t\t:style=\"{top:userComment.length>85?'80rpx':'40rpx'}\">\r\n\t\t\t\t\t\t<tn-button backgroundColor=\"#fe3157\" fontColor=\"#ffffff\" size=\"sm\" shape=\"round\"\r\n\t\t\t\t\t\t\t@click=\"sendReplyComment\">发送</tn-button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</tn-popup>\r\n\t\t</view>\r\n\t\t<view class=\"tn-tabbar-height\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tonLoad\r\n\t} from '../../libs/mixin/template_page_mixin'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvideoId: '',\r\n\t\t\t\tcolor: '#fe3157',\r\n\t\t\t\tcolor1: '#ffffff',\r\n\t\t\t\tuserComment: '',\r\n\t\t\t\theight: 800,\r\n\t\t\t\tshowReport:false,\r\n\t\t\t\treportList:[\r\n\t\t\t\t\t{id:1,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'谩骂攻击'},\r\n\t\t\t\t\t{id:2,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'色情低俗'},\r\n\t\t\t\t\t{id:3,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'网络暴力'},\r\n\t\t\t\t\t{id:4,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'违法违规'},\r\n\t\t\t\t\t{id:5,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'政治敏感'},\r\n\t\t\t\t\t{id:6,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'垃圾广告'},\r\n\t\t\t\t\t{id:7,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'危害人身安全'},\r\n\t\t\t\t\t{id:8,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'未成年相关'},\r\n\t\t\t\t\t{id:9,\r\n\t\t\t\t\tbackgroundColor:'#fffef9',\r\n\t\t\t\t\ttitle:'其他'},\r\n\t\t\t\t\t],\r\n\t\t\t\ttarget: '',\r\n\t\t\t\tplaceholder: '',\r\n\t\t\t\tparentId: '',\r\n\t\t\t\tcommentList: [],\r\n\t\t\t\tvideoInfo: {},\r\n\t\t\t\tcommentTotal: 0,\r\n\t\t\t\tuserId:uni.getStorageSync('userId'),\r\n\t\t\t\tvideoUserId: '',\r\n\t\t\t\tshowCommentList: false,\r\n\t\t\t\tshowSubmitPopup: false,\r\n\t\t\t\tshowReplyPopup: false,\r\n\t\t\t\tip:'',\r\n\t\t\t\tlongitude: '', //经度\r\n\t\t\t\tlatitude: '', //纬度\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tuserComment(newValue, oldValue) {\r\n\t\t\t\tif (newValue.length > 85) {\r\n\t\t\t\t\tthis.height = 1000\r\n\t\t\t\t}\r\n\t\t\t\tif (newValue.length > 100) {\r\n\t\t\t\t\tthis.height = 1025\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t \tthis.getVideoInfo()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcloseshowReport(){\r\n\t\t\t\tfor(var i=0;i<this.reportList.length;i++){\r\n\t\t\t\t\tthis.reportList[i].backgroundColor=\"#fffef9\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselectReports(index){\r\n\t\t\t\tif(this.reportList[index].backgroundColor==='#fffef9'){\r\n\t\t\t\t\tthis.reportList[index].backgroundColor='#fe3157'\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reportList[index].backgroundColor='#fffef9'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgoUserHome(userId) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/userHome/userHome?userId=' + userId\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//举报评论\r\n\t\t\treport(){\r\n\t\t\t\tthis.showReport=true\r\n\t\t\t},\r\n\t\t\tsubmitReport(){\r\n\t\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.$showMsg('亲，先登录才能举报哦~')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.reportList.map(item=>item.backgroundColor).includes('#fe3157')){\r\n\t\t\t\t\tuni.$showMsg('亲，请选择举报原因！')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '感谢您的举报~',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.showReport=false\r\n\t\t\t\t},1000)\r\n\t\t\t},\r\n\t\t\tasync sendComment() {\r\n\t\t\t\tconst saveCommentDTO = {\r\n\t\t\t\t\tcontent: this.userComment.trim(),\r\n\t\t\t\t\tforeignId: this.videoId,\r\n\t\t\t\t\tlongitude: this.longitude,\r\n\t\t\t\t\tlatitude: this.latitude\r\n\t\t\t\t}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.post('/video/comments/saveVideoComment', saveCommentDTO)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tthis.commentTotal++\r\n\t\t\t\t\tthis.loadComment()\r\n\t\t\t\t\tthis.showSubmitPopup = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t// \turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t// })\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: data.msg,\r\n\t\t\t\t\t// \ticon: 'fail'\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tuni.$showMsg(data.msg)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync sendReplyComment() {\r\n\t\t\t\tconst saveCommentDTO = {\r\n\t\t\t\t\tcontent: this.userComment.trim(),\r\n\t\t\t\t\tforeignId: this.videoId,\r\n\t\t\t\t\ttarget: this.target,\r\n\t\t\t\t\tparentId: this.parentId,\r\n\t\t\t\t\tlongitude: this.longitude,\r\n\t\t\t\t\tlatitude: this.latitude\r\n\t\t\t\t}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.post('/video/comments/saveVideoComment', saveCommentDTO)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tthis.commentTotal++\r\n\t\t\t\t\tthis.loadComment()\r\n\t\t\t\t\tthis.showReplyPopup = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t// \turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t// })\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: data.msg,\r\n\t\t\t\t\t// \ticon: 'fail'\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tuni.$showMsg(data.msg)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenSubmitPopup() {\r\n\r\n\t\t\t},\r\n\t\t\tcloseSubmitPopup() {\r\n\t\t\t\tthis.userComment = ''\r\n\t\t\t\tthis.height = 700\r\n\t\t\t},\r\n\t\t\tcloseReplyPopup() {\r\n\t\t\t\tthis.userComment = ''\r\n\t\t\t\tthis.height = 700\r\n\t\t\t},\r\n\t\t\t//发布评论\r\n\t\t\tsubmitComment() {\r\n\t\t\t\tthis.showSubmitPopup = true\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.textarea.focus()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//回复别人\r\n\t\t\tasync reply(target, parentId) {\r\n\t\t\t\tthis.placeholder = '回复 @' + target\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.target = target\r\n\t\t\t\t\tthis.parentId = parentId\r\n\t\t\t\t})\r\n\t\t\t\tthis.showReplyPopup = true\r\n\t\t\t},\r\n\t\t\t//加载最新评论\r\n\t\t\tasync loadComment() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.get('/video/comments/getVideoCommentsList/' + this.videoId)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tthis.commentList = data.data\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.$showMsg('获取评论数据失败！')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandlePublishTimeDesc(createTime) {\r\n\t\t\t\tvar curTime = new Date();\r\n\t\t\t\tvar postTime = new Date(createTime);\r\n\t\t\t\tvar timeDiff = curTime.getTime() - postTime.getTime();\r\n\r\n\t\t\t\t// 单位换算\r\n\t\t\t\tvar min = 60 * 1000;\r\n\t\t\t\tvar hour = min * 60;\r\n\t\t\t\tvar day = hour * 24;\r\n\t\t\t\tvar week = day * 7;\r\n\r\n\t\t\t\t// 计算发布时间距离当前时间的周、天、时、分\r\n\t\t\t\tvar exceedWeek = Math.floor(timeDiff / week);\r\n\t\t\t\tvar exceedDay = Math.floor(timeDiff / day);\r\n\t\t\t\tvar exceedHour = Math.floor(timeDiff / hour);\r\n\t\t\t\tvar exceedMin = Math.floor(timeDiff / min);\r\n\r\n\t\t\t\t// 最后判断时间差到底是属于哪个区间，然后return\r\n\t\t\t\tif (exceedWeek > 0) {\r\n\t\t\t\t\treturn createTime;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (exceedDay < 7 && exceedDay > 0) {\r\n\t\t\t\t\t\treturn exceedDay + '天前';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (exceedHour < 24 && exceedHour > 0) {\r\n\t\t\t\t\t\t\treturn exceedHour + '小时前';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn exceedMin + '分钟前';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//点赞评论\r\n\t\t\tasync likeComment(commentId, isLike) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.put('/video/comments/like/' + commentId)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tif (isLike) {\r\n\t\t\t\t\t\tthis.loadComment()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadComment()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.$showMsg('请先登录后在操作哦！~')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//关闭后\r\n\t\t\tcloseComment() {\r\n\t\t\t\tthis.getVideoInfo()\r\n\t\t\t},\r\n\t\t\t//查看评论列表\r\n\t\t\topenComment(videoId, commentTotal, videoUserId) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.videoId = videoId\r\n\t\t\t\t\tthis.videoUserId = videoUserId\r\n\t\t\t\t})\r\n\t\t\t\tthis.showCommentList = true\r\n\t\t\t},\r\n\t\t\tasync likeVideo(videoId, isLike) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.put('/video/like/' + videoId)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tif (isLike) {\r\n\t\t\t\t\t\tthis.getVideoInfo()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '取消点赞成功~',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getVideoInfo()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '点赞成功~',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 500\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.$showMsg('请先登录后在操作哦！~')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync collectionVideo(videoId, isCollection) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.put('/video/collection/' + videoId)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tif (isCollection) {\r\n\t\t\t\t\t\tthis.getVideoInfo()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '取消收藏成功~',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 600\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getVideoInfo()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '收藏成功~',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 600\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login?index=1'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.$showMsg('请先登录后在操作哦！~')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\tasync getVideoInfo() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = await uni.$http.get('/video/getVideoInfo/' + this.videoId)\r\n\t\t\t\tif (data.code === 1) {\r\n\t\t\t\t\tthis.videoInfo = data.data\r\n\t\t\t\t\tthis.commentTotal = data.data.comment\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\tuni.$showMsg('视频已被删除啦！')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tvar _this = this\r\n\t\t\tuni.getLocation({\r\n\t\t\t\ttype: 'wgs84',\r\n\t\t\t\taltitude: true,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t_this.longitude = res.longitude\r\n\t\t\t\t\t_this.latitude = res.latitude\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.videoId = options.videoId\r\n\t\t\tthis.getVideoInfo()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.tn-tabbar-height {\r\n\t\tmin-height: 120rpx;\r\n\t\theight: calc(100rpx + env(safe-area-inset-bottom) / 2);\r\n\t}\r\n</style>","import mod from \"-!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=style&index=0&id=3ec61a7e&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./video.vue?vue&type=style&index=0&id=3ec61a7e&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1702961533274\n      var cssReload = require(\"E:/微信小程序/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}